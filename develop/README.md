# Cpp로 이미지 필터링

설정하는게 제일 힘들었다...

# openCV 설정관련
[Visual Studio Code에서 CMake 사용하여 OpenCV 코드 컴파일 하기](https://webnautes.tistory.com/933)

# 프로그램 흐름
1. opencv로 이미지 파일을 불러온다.
2. filter를 적용한다.
3. filter가 적용된 이미지를 파일에 저장한다.

위 3가지 과정을 병렬로 빠르게 해보자.

# 시간측정 결과

한개의 스레드로 순차실행한 결과
| 파일 크기 | load image 시간 | apply filter 시간 | save image 시간 |
|---|---|---|---|
|500KB|0.007|0.208|0.011|
|39.1MB|0.795|24.649|4.087|

시간은 초단위이다.
filter 적용하는게 압도적으로 많은 시간을 차지한다.
생산자-소비자 패턴을 적용하고, 생산자를 파일 입력 스레드로 하나 내지 두개를 두고, 소비자를 필터 및 파일 저장으로 두는게 좋을거같다

큰 이미지는 쪼개서 여러개의 스레드가 처리하도록 하자. 구현의 편의를 위해 해당 이미지를 받은 스레드가 추가적으로 스레드를 더 호출한 후, join하는 식으로 구현해보자


12개의 스레드로 병렬실행한 결과
512x512 크기의 이미지로 나누어서 병렬처리한 후, 결과를 다시 합쳐 저장하는 방식으로 구현함.
가로, 세로 모두 512 pixel을 넘지않는 이미지의 경우 한개의 스레드에서 처리함.
| 파일 크기 | load image 시간 | apply filter + save image 시간 |
|---|---|---|
|500KB|0.007|0.216|
|39.1MB|0.805|4.016|
